-- create "users" table
CREATE TABLE "users" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "name" character varying NOT NULL, "type" character varying NOT NULL, PRIMARY KEY ("id"));
-- create "discord_channels" table
CREATE TABLE "discord_channels" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "channel_id" bigint NOT NULL, "name" character varying NOT NULL, "is_group" boolean NOT NULL, "discord_channel_user" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "discord_channels_users_user" FOREIGN KEY ("discord_channel_user") REFERENCES "users" ("id") ON DELETE SET NULL);
-- create index "discord_channels_channel_id_key" to table: "discord_channels"
CREATE UNIQUE INDEX "discord_channels_channel_id_key" ON "discord_channels" ("channel_id");
-- create "telegram_chats" table
CREATE TABLE "telegram_chats" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "chat_id" bigint NOT NULL, "name" character varying NOT NULL, "is_group" boolean NOT NULL, "telegram_chat_user" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "telegram_chats_users_user" FOREIGN KEY ("telegram_chat_user") REFERENCES "users" ("id") ON DELETE SET NULL);
-- create index "telegram_chats_chat_id_key" to table: "telegram_chats"
CREATE UNIQUE INDEX "telegram_chats_chat_id_key" ON "telegram_chats" ("chat_id");
-- create "contracts" table
CREATE TABLE "contracts" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "address" character varying NOT NULL, "name" character varying NOT NULL, "description" character varying NOT NULL, "image_url" character varying NOT NULL, "gov_token" character varying NOT NULL, "discord_channel_chains" bigint NULL, "telegram_chat_contracts" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "contracts_discord_channels_chains" FOREIGN KEY ("discord_channel_chains") REFERENCES "discord_channels" ("id") ON DELETE SET NULL, CONSTRAINT "contracts_telegram_chats_contracts" FOREIGN KEY ("telegram_chat_contracts") REFERENCES "telegram_chats" ("id") ON DELETE SET NULL);
-- create index "contracts_address_key" to table: "contracts"
CREATE UNIQUE INDEX "contracts_address_key" ON "contracts" ("address");
-- create index "contract_address" to table: "contracts"
CREATE UNIQUE INDEX "contract_address" ON "contracts" ("address");
-- create "proposals" table
CREATE TABLE "proposals" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "proposal_id" bigint NOT NULL, "title" character varying NOT NULL, "description" character varying NOT NULL, "expires_at" timestamptz NOT NULL, "status" character varying NOT NULL, "contract_proposals" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "proposals_contracts_proposals" FOREIGN KEY ("contract_proposals") REFERENCES "contracts" ("id") ON DELETE CASCADE);
